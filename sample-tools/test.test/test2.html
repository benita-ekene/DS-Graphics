<!DOCTYPE html>
<html>
<head>
  <title>Sorting Algorithms Visualization</title>
</head>
<body>
  <input type="file" id="fileInput">
  <label for="algorithm">Algorithm:</label>
  <select id="algorithm">
    <option value="bubble">Bubble Sort</option>
    <option value="insertion">Insertion Sort</option>
    <option value="selection">Selection Sort</option>
    <option value="merge">Merge Sort</option>
    <option value="quick">Quick Sort</option>
  </select>
  <label for="order">Order:</label>
  <select id="order">
    <option value="ascending">Ascending</option>
    <option value="descending">Descending</option>
  </select>
  <button onclick="startSorting()">Start Sorting</button>
  <canvas id="myCanvas" width="800" height="400" style="border: 1px solid black;"></canvas>
  <div id="variablesBefore"></div>
  <div id="variablesAfter"></div>
  <script>
    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');
    const barSpacing = 2;
    const canvasHeight = canvas.height;
    const canvasWidth = canvas.width;
    let values = [];

    function parseCSV(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => {
          const lines = reader.result.split('\n');
          values = lines.map((line) => parseInt(line.trim()));
          resolve();
        };
        reader.onerror = reject;
        reader.readAsText(file);
      });
    }

    function drawBars() {
      ctx.clearRect(0, 0, canvasWidth, canvasHeight);
      const barWidth = (canvasWidth - (barSpacing * (values.length - 1))) / values.length;
      for (let i = 0; i < values.length; i++) {
        ctx.fillRect(i * (barWidth + barSpacing), canvasHeight - values[i], barWidth, values[i]);
      }
    }

    // Sorting algorithm functions (same as before)

    async function startSorting() {
      const algorithm = document.getElementById('algorithm').value;
      const order = document.getElementById('order').value;

      const fileInput = document.getElementById('fileInput');
      if (fileInput.files.length > 0) {
        await parseCSV(fileInput.files[0]);
        document.getElementById('variablesBefore').innerText = `Before sorting: ${values.join(', ')}`;
      } else {
        alert('Please select a CSV file.');
        return;
      }

      drawBars();
      document.getElementById('variablesAfter').innerText = '';

      switch (algorithm) {
        // Sorting algorithm cases (same as before)
      }

      values.sort((a, b) => {
        if (order === 'ascending') {
          return a - b;
        } else {
          return b - a;
        }
      });

      document.getElementById('variablesAfter').innerText = `After sorting: ${values.join(', ')}`;
      drawBars();
    }
  </script>
</body>
</html>
